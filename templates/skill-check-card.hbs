<span style="visibility: hidden">coffeepub-hide-header</span>
{{#unless hideHeader}}
<div class="dnd5e chat-card item-card cpb-chat-card cpb-item-card" data-actor-id="{{actorId}}">
    <header class="card-header flexrow cpb-card-header">
        <h3 class="item-name"><i class="fas fa-dice-d20"></i> {{#if dc}}DC {{dc}}{{/if}} {{skillName}} Check</h3>
    </header>
    <div class="card-content cpb-card-content">
        {{#if label}}<div class="cpb-card-section-header">{{label}}</div>{{/if}}
        {{#if description}}
        <div class="gm-description cpb-gm-description">
            <p>{{{description}}}</p>
        </div>
        {{/if}}

        {{#if skillDescription}}
        <div class="cpb-card-section-header">Details</div>
        <div class="skill-description cpb-skill-description">
            <p>{{{skillDescription}}}</p>
            <p>{{{skillLink}}}</p>
        </div>
        {{/if}}
        
        <div class="skill-check-buttons cpb-skill-check-buttons">
            {{#each actors}}
            <div class="skill-check-actor cpb-skill-check-actor">
                {{#if this.result}}
                    <div class="roll-result cpb-roll-result">
                        <span class="actor-name cpb-actor-name">{{this.name}}</span>
                        <span class="roll-total cpb-roll-total" title="{{this.result.formula}}">
                            {{this.result.total}}
                            {{#if ../dc}}
                                {{#if (gte this.result.total ../dc)}}
                                    <i class="fas fa-check" style="color: #18520b;"></i>
                                {{else}}
                                    <i class="fas fa-times" style="color: #aa0200;"></i>
                                {{/if}}
                            {{/if}}
                        </span>
                    </div>
                {{else}}
                    <div class="roll-result pending-roll cpb-roll-result">
                        <button class="skill-roll cpb-skill-roll" data-actor-id="{{this.id}}" data-type="{{../rollType}}" data-value="{{../skillAbbr}}">
                            <i class="fas fa-dice-d20"></i>&nbsp;{{this.name}}
                        </button>
                    </div>
                {{/if}}
            </div>
            {{/each}}
        </div>

        {{log "Template Data:" this}}
        {{#if isGroupRoll}}
            {{log "Group Roll Data:" allRollsComplete successCount totalCount groupSuccess}}
            {{#if allRollsComplete}}
                <div class="cpb-card-section-header">Group Results</div>
                {{#if groupSuccess}}
                    <div class="cpb-group-roll-result-success">
                        <div class="cpb-group-success-text" title="({{successCount}}/{{totalCount}} succeeded)">SUCCESS</div>
                    </div>
                {{else}}
                    <div class="cpb-group-roll-result-failure">
                        <div class="cpb-group-failure-text" title="({{successCount}}/{{totalCount}} succeeded)">FAILURE</div>
                    </div>
                {{/if}}
            {{/if}}
        {{/if}}
    </div>
</div>
{{/unless}} 